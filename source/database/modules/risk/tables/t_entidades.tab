create table T_ENTIDADES
(
  id_entidad       NUMBER generated by default on null as identity,
  alias            VARCHAR2(300),
  id_persona       NUMBER,
  estado           VARCHAR2(1),
  direccion_correo VARCHAR2(320),
  numero_telefono  VARCHAR2(160),
  origen           VARCHAR2(1),
  id_externo       VARCHAR2(500)
)
;
comment on table T_ENTIDADES
  is 'Entidades';
comment on column T_ENTIDADES.id_entidad
  is 'Identificador de la entidad';
comment on column T_ENTIDADES.alias
  is 'Alias de la entidad (identificador para autenticacion)';
comment on column T_ENTIDADES.id_persona
  is 'Persona relacionada a la entidad';
comment on column T_ENTIDADES.estado
  is 'Estado de la entidad';
comment on column T_ENTIDADES.direccion_correo
  is 'Direccion de correo electronico principal de la entidad';
comment on column T_ENTIDADES.numero_telefono
  is 'Numero de telefono principal de la entidad';
comment on column T_ENTIDADES.origen
  is 'Origen de la entidad';
comment on column T_ENTIDADES.id_externo
  is 'Identificador externo de la entidad';
alter table T_ENTIDADES
  add constraint PK_ENTIDADES primary key (ID_ENTIDAD);
alter table T_ENTIDADES
  add constraint UK_ENTIDADES_ALIAS unique (ALIAS);
alter table T_ENTIDADES
  add constraint UK_ENTIDADES_ORIGEN_ID_EXTERNO unique (ORIGEN, ID_EXTERNO);
alter table T_ENTIDADES
  add constraint CK_ENTIDADES_ESTADO
  check (ESTADO IN ('A', 'I'));
