create table T_USUARIOS
(
  id_usuario       NUMBER generated by default on null as identity,
  alias            VARCHAR2(300),
  id_persona       NUMBER,
  estado           VARCHAR2(1),
  direccion_correo VARCHAR2(320),
  numero_telefono  VARCHAR2(160),
  origen           VARCHAR2(1),
  id_externo       VARCHAR2(500)
)
;
comment on table T_USUARIOS
  is 'Usuarios';
comment on column T_USUARIOS.id_usuario
  is 'Identificador del usuario';
comment on column T_USUARIOS.alias
  is 'Alias del usuario (identificador para autenticacion)';
comment on column T_USUARIOS.id_persona
  is 'Persona relacionada al usuario';
comment on column T_USUARIOS.estado
  is 'Estado del usuario';
comment on column T_USUARIOS.direccion_correo
  is 'Direccion de correo electronico principal del usuario';
comment on column T_USUARIOS.numero_telefono
  is 'Numero de telefono principal del usuario';
comment on column T_USUARIOS.origen
  is 'Origen del usuario';
comment on column T_USUARIOS.id_externo
  is 'Identificador externo del usuario';
create index IDX_USUARIOS_ID_EXTERNO on T_USUARIOS (ID_EXTERNO);
create index IDX_USUARIOS_ORIGEN on T_USUARIOS (ORIGEN);
create index IDX_USUARIOS_ID_PERSONA on T_USUARIOS (ID_PERSONA);
create index IDX_USUARIOS_ORIGEN_ESTADO on T_USUARIOS (ORIGEN, ESTADO);
alter table T_USUARIOS
  add constraint PK_USUARIOS primary key (ID_USUARIO);
alter table T_USUARIOS
  add constraint UK_USUARIOS_ALIAS unique (ALIAS);
alter table T_USUARIOS
  add constraint UK_USUARIOS_ORIGEN_ID_EXTERNO unique (ORIGEN, ID_EXTERNO);
alter table T_USUARIOS
  add constraint CK_USUARIOS_ESTADO
  check (ESTADO IN ('A', 'I', 'B', 'P'));
