create table T_MENSAJES_RECIBIDOS
(
  id_mensaje              NUMBER generated by default on null as identity,
  numero_telefono_origen  VARCHAR2(40) not null,
  numero_telefono_destino VARCHAR2(40) not null,
  contenido               VARCHAR2(160) not null,
  telefonia               VARCHAR2(3) default 'TIG' not null,
  fecha_recepcion         TIMESTAMP(2) WITH TIME ZONE default current_timestamp not null,
  id_usuario              NUMBER
)
;
comment on table T_MENSAJES_RECIBIDOS
  is 'Mensajes de texto (SMS) recibidos';
comment on column T_MENSAJES_RECIBIDOS.id_mensaje
  is 'Identificador del mensaje de texto recibido';
comment on column T_MENSAJES_RECIBIDOS.numero_telefono_origen
  is 'Número de teléfono origen del mensaje de texto';
comment on column T_MENSAJES_RECIBIDOS.numero_telefono_destino
  is 'Número de teléfono destino del mensaje de texto';
comment on column T_MENSAJES_RECIBIDOS.contenido
  is 'Contenido del mensaje';
comment on column T_MENSAJES_RECIBIDOS.telefonia
  is 'Compañía telefónica. (TIG-Tigo, PER-Personal)';
comment on column T_MENSAJES_RECIBIDOS.fecha_recepcion
  is 'Fecha de recepción';
comment on column T_MENSAJES_RECIBIDOS.id_usuario
  is 'Usuario origen del mensaje de texto';
alter table T_MENSAJES_RECIBIDOS
  add constraint PK_MENSAJES_RECIBIDOS primary key (ID_MENSAJE);
alter table T_MENSAJES_RECIBIDOS
  add constraint CK_MENSAJES_RECIBIDOS_TELEFONIA
  check (telefonia in ('TIG', 'PER'));

